
<!DOCTYPE html>
<html>
<head>
<base target='_top'>
</head>
<body>
<div id='date' style="text-align: center; font-size: 500%;"></div>
<div id='time' style="text-align: center; font-size: 800%;"></div>
<div id='period' style="text-align: center; font-size: 600%;"></div>
<div id='periodCountdown' style="text-align: center; font-size: 800%;"></div>
<div id='breakCountdown' style="text-align: center; font-size: 800%;"></div>

<script>
var x = setInterval(function() {
var dateNow = new Date();
var year = dateNow.getFullYear();
var month = dateNow.getMonth();
if (month < 10) {
    var displayMonth = '0' + (month + 1); // since months are zero-indexed
} else {
    var displayMonth = month + 1;
}
var day = dateNow.getDate();
if (day < 10) {
    var displayDay = '0' + day;
} else {
    var displayDay = day;
}
var weekdayNumber = dateNow.getDay();
const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
var weekday = weekdays[weekdayNumber];
var hour = dateNow.getHours();
if (hour > 12) {hour = hour - 12;}
var minute = dateNow.getMinutes();
if (minute < 10) {minute = "0" + minute;}
var ampm = dateNow.getHours() >= 12 ? 'PM' : 'AM';
document.getElementById('date').innerHTML = weekday+" "+year+"-"+displayMonth+"-"+displayDay;
document.getElementById('time').innerHTML = hour+":"+minute+" "+ampm;


if (dateNow.getDay() == 0 || dateNow.getDay() == 6) { // Sunday or Saturday
    document.body.style.backgroundColor='#202020';
} else {
if (day < 8 && dateNow.getDay() == 3) { // first Wednesday of the month
    var zero = new Date(year, month, day, 8, 37, 0);
    var one = new Date(year, month, day, 9, 3, 0);
    var two = new Date(year, month, day, 9, 29, 0);
    var three = new Date(year, month, day, 9, 55, 0);
    var recess1 = new Date(year, month, day, 10, 10, 0);
    var four = new Date(year, month, day, 10, 36, 0);
    var five = new Date(year, month, day, 11, 2, 0);
    var six = new Date(year, month, day, 11, 28, 0);
    var seven = new Date(year, month, day, 11, 54, 0);
    var lunch1 = new Date(year, month, day, 12, 24, 0);
    var lunch2 = new Date(year, month, day, 12, 54, 0);
    var eight = new Date(year, month, day, 13, 20, 0);
    var nine = new Date(year, month, day, 13, 46, 0);
    var ten = new Date(year, month, day, 14, 12, 0);
    var difference = zero - dateNow;
    var period = "";
    if (difference < 0) {difference = one - dateNow; period = "Period 1";}
    if (difference < 0) {difference = two - dateNow; period = "Period 2";}
    if (difference < 0) {difference = three - dateNow; period = "Period 3";}
    if (difference < 0) {difference = recess1 - dateNow; period = "Recess";}
    if (difference < 0) {difference = four - dateNow; period = "Period 4";}
    if (difference < 0) {difference = five - dateNow; period = "Period 5";}
    if (difference < 0) {difference = six - dateNow; period = "Period 6";}
    if (difference < 0) {difference = seven - dateNow; period = "Period 7";}
    if (difference < 0) {difference = lunch1 - dateNow; period = "Lunch / Recess";}
    if (difference < 0) {difference = lunch2 - dateNow; period = "Lunch / Recess";}
    if (difference < 0) {difference = eight - dateNow; period = "Period 8";}
    if (difference < 0) {difference = nine - dateNow; period = "Period 9";}
    if (difference < 0) {difference = ten - dateNow; period = "Period 10";}
    if (difference < 0) {difference = ""; period = "";}
    var untilBreak = three - dateNow;
    if (untilBreak < 0) {untilBreak = seven - dateNow;}
    if (untilBreak < 0) {untilBreak = ten - dateNow;}
} else {
    var zero = new Date(year, month, day, 8, 37, 0);
    var one = new Date(year, month, day, 9, 9, 0);
    var two = new Date(year, month, day, 9, 41, 0);
    var three = new Date(year, month, day, 10, 13, 0);
    var recess1 = new Date(year, month, day, 10, 30, 0);
    var four = new Date(year, month, day, 11, 02, 0);
    var five = new Date(year, month, day, 11, 34, 0);
    var six = new Date(year, month, day, 12, 6, 0);
    var lunch1 = new Date(year, month, day, 12, 28, 0);
    var lunch2 = new Date(year, month, day, 12, 51, 0);
    var seven = new Date(year, month, day, 13, 23, 0);
    var eight = new Date(year, month, day, 13, 53, 0);
    var recess2 = new Date(year, month, day, 14, 08, 0);
    var nine = new Date(year, month, day, 14, 40, 0);
    var ten = new Date(year, month, day, 15, 12, 0);
    var difference = zero - dateNow;
    var period = "";
    if (difference < 0) {difference = one - dateNow; period = "Period 1";}
    if (difference < 0) {difference = two - dateNow; period = "Period 2";}
    if (difference < 0) {difference = three - dateNow; period = "Period 3";}
    if (difference < 0) {difference = recess1 - dateNow; period = "Recess";}
    if (difference < 0) {difference = four - dateNow; period = "Period 4";}
    if (difference < 0) {difference = five - dateNow; period = "Period 5";}
    if (difference < 0) {difference = six - dateNow; period = "Period 6";}
    if (difference < 0) {difference = lunch1 - dateNow; period = "Lunch / Recess";}
    if (difference < 0) {difference = lunch2 - dateNow; period = "Lunch / Recess";}
    if (difference < 0) {difference = seven - dateNow; period = "Period 7";}
    if (difference < 0) {difference = eight - dateNow; period = "Period 8";}
    if (difference < 0) {difference = recess2 - dateNow; period = "Recess";}
    if (difference < 0) {difference = nine - dateNow; period = "Period 9";}
    if (difference < 0) {difference = ten - dateNow; period = "Period 10";}
    if (difference < 0) {difference = ""; period = "";}
    var untilBreak = three - dateNow;
    if (untilBreak < 0) {untilBreak = six - dateNow;}
    if (untilBreak < 0) {untilBreak = eight - dateNow;}
    if (untilBreak < 0) {untilBreak = ten - dateNow;}
}

document.getElementById('period').innerHTML = period;
document.getElementById('period').style.color='blue';

// period countdown
var hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
var minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
var seconds = Math.floor((difference % (1000 * 60)) / 1000);
if (seconds < 10) {seconds = "0" + seconds;}
if (hours > 0) {
    if (minutes < 10) {minutes = "0" + minutes;}
    document.getElementById('periodCountdown').innerHTML = hours+":"+minutes+":"+seconds;
    document.getElementById('periodCountdown').style.color='blue';
} else {
    document.getElementById('periodCountdown').innerHTML = minutes + ":" + seconds;
    document.getElementById('periodCountdown').style.color='blue';
    if (minutes < 5) {document.getElementById('periodCountdown').style.color='red';} // set text color to red if < 5 minutes
    if (minutes ==0 && seconds == 0) {document.getElementById('periodCountdown').style.color='white';} // hide it at the end of the day
}

// break countdown
var hoursUntilBreak = Math.floor((untilBreak % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
var minutesUntilBreak = Math.floor((untilBreak % (1000 * 60 * 60)) / (1000 * 60));
var secondsUntilBreak = Math.floor((untilBreak % (1000 * 60)) / 1000);
if (secondsUntilBreak < 10) {secondsUntilBreak = "0" + secondsUntilBreak;}

if (hoursUntilBreak > 0) { // more than an hour until break
    if (minutesUntilBreak < 10) {minutesUntilBreak = "0" + minutesUntilBreak;}
    document.getElementById('breakCountdown').innerHTML = hoursUntilBreak + ":" + minutesUntilBreak + ":" + secondsUntilBreak;
    document.getElementById('breakCountdown').style.color='green';
} else if (minutesUntilBreak > 32) { // more than one period until break
    document.getElementById('breakCountdown').innerHTML = minutesUntilBreak + ":" + secondsUntilBreak;
    document.getElementById('breakCountdown').style.color='green';
} else if (hoursUntilBreak < 0) { // after school
    document.getElementById('breakCountdown').innerHTML = ""; 
} else { // we are in the last period before break
    //document.getElementById('breakCountdown').innerHTML = "";
    document.getElementById('breakCountdown').innerHTML = minutesUntilBreak + ":" + secondsUntilBreak;
    document.getElementById('breakCountdown').style.color='grey';
}

if (hours == 5 && minutes == 30 && seconds == 30) {location.reload(true);} // reload each morning for an update
} // closing the Saturday Sunday check
}, 1000); // updating setInterval every 1000 milliseconds
</script>
</body>
</html>